<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Paul Sheridan" />
<meta name="author" content="Mikael Onsjö" />
<meta name="author" content="Oshan Modi" />

<meta name="date" content="2023-06-13" />

<title>An Introduction to stoRy</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">An Introduction to stoRy</h1>
<h4 class="author">Paul Sheridan</h4>
<h4 class="author">Mikael Onsjö</h4>
<h4 class="author">Oshan Modi</h4>
<h4 class="date">June 13, 2023</h4>



<div id="background" class="section level2">
<h2>Background</h2>
<p>The <em>Theme Ontology Project</em> is an open access, community-based fiction studies undertaking to * define common literary themes (or &quot;themes&quot; for short), * classify defined themes into a hierarchically structured controlled-vocabulary, and * annotate works of fiction with the themes within a collaborative framework. The LTO refers to the hierarchically structured collection of literary themes <span class="citation">(Sheridan, Onsjö, and Hastings 2019)</span>. The current developmental version of the LTO contains over 3,000 carefully defined themes. To date over 3,000 stories (e.g., films, novels, TV series episodes, video game plots, etc.) have been annotated with LTO themes. All data is hosted on the Theme Ontology GitHub repository <a href="https://github.com/theme-ontology/theming">theming</a>. It can be explored on the Theme Ontology <a href="https://www.themeontology.org/">website</a>. The <code>stoRy</code> package is used to perform various statistical analyses on the data. These tells us interesting things about the kind of stories we humans invent.</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>The package is hosted on CRAN and can be installed by running the command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;stoRy&quot;</span>)</code></pre></div>
<p>The developmental version is hosted on GitHub and can be installed using the devtools package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;devtools&quot;)</span>
<span class="co"># devtools::install_github(&quot;theme-ontology/stoRy&quot;)</span></code></pre></div>
<p>Once installed, the package can be loaded by running the standard library command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stoRy)</code></pre></div>
</div>
<div id="accessing-documentation" class="section level2">
<h2>Accessing Documentation</h2>
<p>Each function in the package is documented. The command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="dt">package =</span> <span class="st">&quot;stoRy&quot;</span>)</code></pre></div>
<p>gives a cursory overview of the package and a complete list of package functions.</p>
<p>Help with using functions is obtained in the usual R manner. For instance, the documentation for the <code>get_similar_stories</code> function can be accessed with the command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?get_similar_stories</code></pre></div>
<p>The command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">citation</span>(<span class="st">&quot;stoRy&quot;</span>)</code></pre></div>
<p>prints to console everything needed to cite the package in a publication.</p>
</div>
<div id="quick-start-the-twilight-zone-franchise-demo-data" class="section level2">
<h2>Quick Start: The Twilight Zone Franchise Demo Data</h2>
<p>This section is a good starting point for first time users. Included in the package is a toy dataset, extracted from the latest LTO version, comprising some 2,945 LTO themes and 335 thematically annotated <em>The Twilight Zone</em> American media franchise stories <span class="citation">(Wikipedia 2021)</span>.</p>
<p>The themes are hierarchically arranged into three domains descended from an abstract root theme:</p>
<pre><code>literary thematic entity
├── the human world
├── the natural world
└── alternate reality</code></pre>
<p>Contained in the demo data are the following <em>Twilight Zone</em> thematically annotated stories:</p>
<ul>
<li><p>156 <em>The Twilight Zone</em> (1959) television series episodes</p></li>
<li><p>3 <em>Twilight Zone: The Movie</em> (1983) film sub-stories</p></li>
<li><p>110 <em>The Twilight Zone</em> (1985) television series episodes</p></li>
<li><p>3 <em>Twilight Zone: Rod Serling's Lost Classics</em> (1994) film sub-stories</p></li>
<li><p>43 <em>The Twilight Zone</em> (2002) television series episodes</p></li>
<li><p>20 <em>The Twilight Zone</em> (2019) television series episodes</p></li>
</ul>
<p>Users may avail themselves of the demo data to experiment with package functions without having to download any official LTO version data to their local machine.</p>
<p>To begin check that the <code>demo</code> LTO version is active</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which_lto</span>()</code></pre></div>
<p>Should it be that another LTO version is actively loaded, switch to the <code>demo</code> version</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set_lto</span>(<span class="dt">version =</span> <span class="st">&quot;demo&quot;</span>)</code></pre></div>
<p>Print LTO <code>demo</code> version summary information to console</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print_lto</span>()</code></pre></div>
<p>A detailed description of the demo data included in the package can be viewed by running the command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?<span class="st">`</span><span class="dt">lto-demo</span><span class="st">`</span></code></pre></div>
<p><strong>Pro Tip</strong>: The demo data, and LTO version data more generally, is internally stored in such a way that prohibits users from modifying it. The following sequence of commands, however, clones the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_metadata_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_metadata_tbl</span>()
demo_themes_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_themes_tbl</span>()
demo_stories_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_stories_tbl</span>()
demo_collections_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_collections_tbl</span>()</code></pre></div>
<p>See <code>?lto-demo</code> for more details on exploring the output tibble contents.</p>
<div id="example-initialize-a-theme" class="section level3">
<h3>Example: Initialize a Theme</h3>
<p>The social phenomenon of dangers, be they real or imagined, spreading through a community as a result of rumors and fear is explored in numerous works of fiction, including several <em>Twilight Zone</em> episodes.</p>
<p>The LTO captures hysteria of this kind with the theme <a href="https://www.themeontology.org/theme/mass%20hysteria">mass hysteria</a>. To explore &quot;mass hysteria&quot; theme (&quot;demo&quot; version) initialize the <code>Theme</code> class object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">theme &lt;-<span class="st"> </span>Theme<span class="op">$</span><span class="kw">new</span>(<span class="dt">theme_name =</span> <span class="st">&quot;mass hysteria&quot;</span>)</code></pre></div>
<p>The theme entry can be printed to console in two ways</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Print stylized text:</span>
theme

<span class="co"># Print in plain text .th.txt file format:</span>
theme<span class="op">$</span><span class="kw">print</span>(<span class="dt">canonical =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Story thematic annotations are stored as a tibble</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">theme<span class="op">$</span><span class="kw">annotations</span>()</code></pre></div>
<p>See <code>?Theme</code> for more on <code>Theme</code> class objects.</p>
<p><strong>A Note on Finding Themes</strong>: LTO developmental themes are easily explored using the <a href="https://www.themeontology.org/themes">theme search box</a> on the project website. Chances are that any theme found in the developmental version will also exist in the demo version. So searching for themes on the website offers a practical approach to finding interesting themes to initialize in an R session.</p>
<p><strong>Pro Tip</strong>: Demo version themes are explorable in tibble format. For example, here is one way to search for &quot;mass hysteria&quot; directly in the demo themes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;dplyr&quot;)</span>
<span class="kw">suppressMessages</span>(<span class="kw">library</span>(dplyr))
<span class="co"># install.packages(&quot;stringr&quot;)</span>
<span class="kw">library</span>(stringr)
demo_themes_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_themes_tbl</span>()
demo_themes_tbl <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(theme_name, <span class="st">&quot;mass&quot;</span>))</code></pre></div>
<p>Notice that all themes containing the substring <code>&quot;mass&quot;</code> are returned. The <code>dplyr</code> package is required to run the <code>%&gt;%</code> mediated pipeline.</p>
</div>
<div id="example-initialize-a-story" class="section level3">
<h3>Example: Initialize a Story</h3>
<p>Thematically annotated stories are initialized by story ID. For example, run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">story &lt;-<span class="st"> </span>Story<span class="op">$</span><span class="kw">new</span>(<span class="dt">story_id =</span> <span class="st">&quot;tz1959e1x22&quot;</span>)</code></pre></div>
<p>to initialize a <code>Story</code> class object representing the &quot;mass hysteria&quot; featuring classic <em>Twilight Zone</em> (1959) television series episode <em>The Monsters Are Due on Maple Street</em>.</p>
<p>Story thematic annotations along with episode identifying metadata can be printed to console</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># In stylized text format:</span>
story

<span class="co"># In plain text .st.txt file format:</span>
story<span class="op">$</span><span class="kw">print</span>(<span class="dt">canonical =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>A tibble of thematic annotations is obtained by running</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">themes &lt;-<span class="st"> </span>story<span class="op">$</span><span class="kw">themes</span>()
themes</code></pre></div>
<p>See <code>?Theme</code> for more on <code>Theme</code> class objects.</p>
<p><strong>A Note on Finding Story IDs</strong>: The project website <a href="https://www.themeontology.org/stories">story search box</a> offers a quick-and-dirty way of locating LTO developmental version story IDs of interest. Since story IDs are stable, developmental version <em>The Twilight Zone</em> story IDs can be expected to agree with their demo data counterparts.</p>
<p><strong>Pro Tip</strong>: A demo data story ID is directly obtained from an episode title as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">title &lt;-<span class="st"> &quot;The Monsters Are Due on Maple Street&quot;</span>
demo_stories_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_stories_tbl</span>()
story_id &lt;-<span class="st"> </span>demo_stories_tbl <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(title <span class="op">==</span><span class="st"> </span><span class="op">!!</span>title) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(story_id)
story_id</code></pre></div>
<p>The <code>dplyr</code> package is again required to run the <code>%&gt;%</code> mediated pipeline.</p>
</div>
<div id="example-initialize-a-collection" class="section level3">
<h3>Example: Initialize a Collection</h3>
<p>Each story belongs to at least one collection (i.e. a set of related stories). <em>The Monsters Are Due on Maple Street</em>, for instance, belongs to the two collections</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">story<span class="op">$</span><span class="kw">collections</span>()</code></pre></div>
<p>To initialize a <code>Collection</code> class object for <em>The Twilight Zone</em> (1959) television series, of which <em>The Monsters Are Due on Maple Street</em> is an episode, run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">collection &lt;-<span class="st"> </span>Collection<span class="op">$</span><span class="kw">new</span>(<span class="dt">collection_id =</span> <span class="st">&quot;Collection: tvseries: The Twilight Zone (1959)&quot;</span>)</code></pre></div>
<p>Collection info is printed to console in the same way as with themes and stories</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Print stylized text:</span>
collection

<span class="co"># Print in plain text .st.txt file format:</span>
collection<span class="op">$</span><span class="kw">print</span>(<span class="dt">canonical =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><strong>A Note on Finding Collection IDs</strong>: As with stories, LTO developmental version collections can be explored from the project website <a href="https://www.themeontology.org/stories">story search box</a>. Developmental and demo version collection IDs should generally match up. This is in particular the case with <em>Twilight Zone</em> collection IDs.</p>
<p><strong>Pro Tip</strong>: Demo version collections can be directly explored in the usual way</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_collections_tbl &lt;-<span class="st"> </span><span class="kw">clone_active_collections_tbl</span>()
demo_collections_tbl</code></pre></div>
</div>
<div id="example-find-the-topmost-featured-themes-in-a-collection" class="section level3">
<h3>Example: Find the Topmost Featured Themes in a Collection</h3>
<p>To view the top 10 most featured themes in the <em>The Twilight Zone</em> (1959) series run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">collection &lt;-<span class="st"> </span>Collection<span class="op">$</span><span class="kw">new</span>(<span class="dt">collection_id =</span> <span class="st">&quot;Collection: tvseries: The Twilight Zone (1959)&quot;</span>)
result_tbl &lt;-<span class="st"> </span><span class="kw">get_featured_themes</span>(collection)
result_tbl</code></pre></div>
<p>To view the top 10 most featured themes in the demo data as a whole run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result_tbl &lt;-<span class="st"> </span><span class="kw">get_featured_themes</span>()
result_tbl</code></pre></div>
</div>
<div id="example-find-the-topmost-enriched-themes-in-a-collection" class="section level3">
<h3>Example: Find the Topmost Enriched Themes in a Collection</h3>
<p>To view the top 10 most enriched, or over-represented themes in <em>The Twilight Zone</em> (1959) series with all <em>The Twilight Zone</em> stories as background run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_collection &lt;-<span class="st"> </span>Collection<span class="op">$</span><span class="kw">new</span>(<span class="dt">collection_id =</span> <span class="st">&quot;Collection: tvseries: The Twilight Zone (1959)&quot;</span>)
result_tbl &lt;-<span class="st"> </span><span class="kw">get_enriched_themes</span>(test_collection)
result_tbl</code></pre></div>
<p>To run the same analysis not counting <em>minor</em> level themes run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result_tbl &lt;-<span class="st"> </span><span class="kw">get_enriched_themes</span>(test_collection, <span class="dt">weights =</span> <span class="kw">list</span>(<span class="dt">choice =</span> <span class="dv">1</span>, <span class="dt">major =</span> <span class="dv">1</span>, <span class="dt">minor =</span> <span class="dv">0</span>))
result_tbl</code></pre></div>
<p>The theory and methods implemented in the <code>get_enriched_themes</code> function are described in <span class="citation">(Onsjö and Sheridan 2020)</span>.</p>
</div>
<div id="example-find-similar-stories-to-a-story-of-interest" class="section level3">
<h3>Example: Find Similar Stories to a Story of Interest</h3>
<p>To view the top 10 most thematically similar <em>Twilight Zone</em> franchise stories to <em>The Monsters Are Due on Maple Street</em> run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">query_story &lt;-<span class="st"> </span>Story<span class="op">$</span><span class="kw">new</span>(<span class="dt">story_id =</span> <span class="st">&quot;tz1959e1x22&quot;</span>)
result_tbl &lt;-<span class="st"> </span><span class="kw">get_similar_stories</span>(query_story)
result_tbl</code></pre></div>
<p>The theory and methods implemented in the <code>get_similar_stories</code> function are described in <span class="citation">(Sheridan et al. 2019)</span>.</p>
</div>
<div id="example-find-clusters-of-similar-stories" class="section level3">
<h3>Example : Find Clusters of Similar Stories</h3>
<p>Cluster <em>The Twilight Zone</em> franchise stories according to thematic similarity by running</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">123</span>)
result_tbl &lt;-<span class="st"> </span><span class="kw">get_story_clusters</span>()
result_tbl</code></pre></div>
<p>The command <code>set.seed(123)</code> is run here for the purpose of reproducibility.</p>
<p>Explore a cluster of stories related to traveling back in time</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">3</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
<p>Explore a cluster of stories related to mass panics</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">5</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
<p>Explore a cluster of stories related to executions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">7</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
<p>Explore a cluster of stories related to space aliens</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">10</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
<p>Explore a cluster of stories related to old people wanting to be young</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">11</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
<p>Explore a cluster of stories related to wish making</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster_id &lt;-<span class="st"> </span><span class="dv">13</span>
<span class="kw">pull</span>(result_tbl, stories)[[cluster_id]]
<span class="kw">pull</span>(result_tbl, themes)[[cluster_id]]</code></pre></div>
</div>
</div>
<div id="download-and-configure-lto-version-data" class="section level2">
<h2>Download and Configure LTO Version Data</h2>
<p>The package works with data from these LTO versions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lto_version_statuses</span>()</code></pre></div>
<div id="example-download-and-configure-the-latest-lto-version" class="section level3">
<h3>Example: Download and Configure the Latest LTO Version</h3>
<p>To download and cache the latest versioned LTO release run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">configure_lto</span>(<span class="dt">version =</span> <span class="st">&quot;latest&quot;</span>)</code></pre></div>
<p>This can take awhile.</p>
<p>Load the newly configured LTO version as the active version in the R session:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set_lto</span>(<span class="dt">version =</span> <span class="st">&quot;latest&quot;</span>)</code></pre></div>
<p>To double check that it has been loaded successfully run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which_lto</span>()</code></pre></div>
<p>Now that the latest LTO version is loaded into the R session, its stories and themes can be analyzed in the same way as with the &quot;demo&quot; LTO version data as shown above.</p>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references">
<div id="ref-Onsjo2020">
<p>Onsjö, Mikael, and Paul Sheridan. 2020. “Theme Enrichment Analysis: A Statistical Test for Identifying Significantly Enriched Themes in a List of Stories with an Application to the Star Trek Television Franchise.” <em>Digital Studies/Le Champ Numérique</em> 10 (1): 1.</p>
</div>
<div id="ref-Sheridan2019b">
<p>Sheridan, Paul, Mikael Onsjö, and Janna Hastings. 2019. “The Literary Theme Ontology for Media Annotation and Information Retrieval.” In <em>Proceedings of the Joint Ontology Workshops 2019</em>.</p>
</div>
<div id="ref-Sheridan2019a">
<p>Sheridan, Paul, Mikael Onsjö, Claudia Becerra, Sergio Jimenez, and George Dueñas. 2019. “An Ontology-Based Recommender System with an Application to the Star Trek Television Franchise.” <em>Future Internet</em> 11 (9).</p>
</div>
<div id="ref-Wikipedia2021">
<p>Wikipedia. 2021. “The Twilight Zone — Wikipedia, the Free Encyclopedia.” <a href="https://en.wikipedia.org/w/index.php?title=The%20Twilight%20Zone&amp;oldid=1042023157">https://en.wikipedia.org/w/index.php?title=The%20Twilight%20Zone&amp;oldid=1042023157</a>.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
